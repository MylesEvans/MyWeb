<script>
    const frog = document.getElementById('frog');
    
    async function search() {
      const query = document.getElementById('searchQuery').value.toLowerCase();  // Convert to lowercase for case-insensitive check
      const resultsDiv = document.getElementById('results');
      
      if (query === 'ralph' || query === 'ralphie') {
        // Show frog and start the jump animation
        frog.style.display = 'block';
        
        // Wait for frog to finish jumping out before showing frog-related results
        setTimeout(async () => {
          try {
            const wikiApiUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/Frog`;
            const response = await fetch(wikiApiUrl);
            const data = await response.json();
            
            if (data && data.extract) {
              resultsDiv.style.display = 'block';
              resultsDiv.innerHTML = `<h3>Frog Facts:</h3><p>${data.extract}</p><a href="${data.content_urls.desktop.page}" target="_blank">Read more on Wikipedia</a>`;
            } else {
              resultsDiv.innerHTML = '<p>No frog-related information found.</p>';
            }
          } catch (error) {
            console.error('Error fetching frog data:', error);
            resultsDiv.innerHTML = '<p>Failed to fetch frog information.</p>';
          }
        }, 5000); // Adjust time to match frog animation duration
      } else {
        // Handle regular search
        const url = `https://bob.mylesjohn2012.workers.dev/?q=${encodeURIComponent(query)}`;
        try {
          const response = await fetch(url);
          const data = await response.json();
          resultsDiv.innerHTML = '';
          
          if (data.items) {
            resultsDiv.style.display = 'block';
            data.items.forEach(item => {
              const result = document.createElement('div');
              result.innerHTML = `<h3><a href="${item.link}" target="_blank">${item.title}</a></h3><p>${item.snippet}</p>`;
              resultsDiv.appendChild(result);
            });
          } else {
            resultsDiv.innerHTML = '<p>No results found.</p>';
            resultsDiv.style.display = 'block';
          }
        } catch (error) {
          console.error('Search error:', error);
          resultsDiv.innerHTML = '<p>Something went wrong.</p>';
          resultsDiv.style.display = 'block';
        }
      }
    }
</script>
